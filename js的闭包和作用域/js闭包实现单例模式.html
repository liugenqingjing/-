<!--
 * @Description: 
 * @Author: 小何
 * @Date: 2021-10-01 20:00:10
 * @LastEditTime: 2021-10-01 20:11:10
 * @LastEditors:  
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>js闭包实现单例模式</title>
  </head>
  <body>
    <button id="login">登录</button>
  </body>
  <script>
    //创建div标签
    let createLogin = (a, b, c) => {
      console.log(a, b, c);
      let div = document.createElement("div");
      div.innerText = "我是登录按钮，出现~~~";
      div.style.display = "none";
      document.body.append(div);
      return div;
    };

    //获取单例
    let getSingle = (fn) => {
      let result;
      return function () {
        return result || (result = fn.apply(this, arguments));
      };
    };

    //保存闭包函数
    let create = getSingle(createLogin);

    document.querySelector("#login").addEventListener("click", () => {
      let loginLay = create(1, 2, 3);
      loginLay.style.display = "block";
    });
  </script>
</html>
