<!--
 * @Description: 
 * @Author: 小何
 * @Date: 2021-09-29 18:12:09
 * @LastEditTime: 2021-09-29 18:24:10
 * @LastEditors:  
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>箭头函数中的this</title>
  </head>
  <body></body>
  <script>
    //箭头函数中的this是定义函数的时候绑定的，而不是在执行函数的时候绑定。
    var x = 11;
    var obj = {
      x: 22,
      say: () => {
        console.log(this.x); //11
      },
    };
    obj.say();

    //所谓的定义时候绑定，就是this是继承自父执行上下文中的this，比如这里的箭头函数中的this.x，箭头函数本身与say平级以key:value的形式，
    //也就是箭头函数本身所在的对象为obj，而obj的父执行上下文就是window，因此这里的this.x实际上标识的是window.x，因此输出的是11

    var obj = {
      birth: 1990,
      getAge: function () {
        var b = this.birth; //1990
        var fn = () => new Date().getFullYear() - this.birth; //this指向obj对象
        console.log(fn());
      },
    };
    obj.getAge(); //31
  </script>
</html>
