<!--
 * @Description: 
 * @Author: 小何
 * @Date: 2021-09-30 11:23:13
 * @LastEditTime: 2021-09-30 11:45:02
 * @LastEditors:  
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>防抖</title>
  </head>
  <body>
    <input type="text" />
  </body>
  <script>
    let inputs = document.querySelector("input");
    // 防抖的函数
    function debounce(delay, callback) {
      let timer;
      return function (value) {
        clearTimeout(timer);
        //我们想清楚setTimeout 我们应该存储这个timer的变量
        //timer变量需要一直保存在内存当中
        //既然你不想打印之前已经输入的结果 清除以前触发的定时器
        //我们应该存储这个timer的变量
        //一直要在内存当中，内存泄漏，闭包
        timer = setTimeout(() => {
          callback(value);
        }, delay);
      };
    }

    //接收返回的函数
    let debounceFuc = debounce(1000, doResult);

    //执行最后的结果
    function doResult(val) {
      console.log(val);
    }

    //我需要的是 首先 输入框的结果只显示一次  是我在键盘抬起来不在输入后1秒之后
    inputs.addEventListener("keyup", (e) => {
      debounceFuc(e.target.value);
    });
  </script>
</html>
