<!--
 * @Description: 
 * @Author: 小何
 * @Date: 2021-09-29 21:58:05
 * @LastEditTime: 2021-09-29 22:50:22
 * @LastEditors:  
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>js中的深浅拷贝</title>
  </head>
  <body></body>
  <script>
    let person = {
      name: "小何",
      hobby: ["javascript", ["game", "lol", "b站"]],
    };
    //赋值： 当我们把一个对象赋值给一个新的变量时，赋的其实是该对象的在栈中的地址，
    //而不是堆中的数据。也就是两个对象指向的是同一个存储空间，无论哪个对象发生改变，
    //其实都是改变的存储空间的内容，因此，两个对象是联动的。
    // let person1 = person;
    // person1.name = "小瑶";
    // person1.hobby = ["node"];
    // console.log(person);
    // console.log(person1);

    //浅拷贝: 浅拷贝是创建一个新对象，这个对象有着原始对象属性值的一份精确拷贝。
    //如果属性是基本类型，拷贝的就是基本类型的值，如果属性是引用类型，拷贝的就是内存地址
    //，所以如果其中一个对象改变了这个地址，就会影响到另一个对象。
    // function shallowClone(obj) {
    //   // let target = {};
    //   let target = new obj.constructor();
    //   for (let i in obj) {
    //     if (obj.hasOwnProperty(i)) {
    //       target[i] = obj[i];
    //     }
    //   }
    //   return target;
    // }
    // let person1 = shallowClone(person);
    // person1.name = "小瑶";
    // person1.hobby[0] = "shop";
    // console.log(person);
    // console.log(person1);

    //深拷贝： 深拷贝是将一个对象从内存中完整的拷贝一份出来,
    //从堆内存中开辟一个新的区域存放新对象,且修改新对象不会影响原对象。
    // function deepClone(obj) {
    //   // let target = {};
    //   let target = new obj.constructor();
    //   if (obj === null) return obj;
    //   if (obj instanceof Date) return new Date(obj);
    //   if (obj instanceof RegExp) return new RegExp(obj);
    //   if (typeof obj !== "object") return obj;
    //   for (let i in obj) {
    //     if (obj.hasOwnProperty(i)) {
    //       target[i] = deepClone(obj[i]);
    //     }
    //   }
    //   return target;
    // }
    // let person1 = deepClone(person);
    // person1.name = "小瑶";
    // person1.hobby[0] = "shop";
    // console.log(person);
    // console.log(person1);

    //浅拷贝:
    //        Object.assign()
    //        lodash _.clone
    //         ... 展开运算符 用的最多的
    //        Array.prototype.concat
    //        Array.prototype.slice
    // let person1 = Object.assign({}, person);
    // person1.name = "小瑶";
    // console.log(person);
    // console.log(person1);
    // let person1 = { ...person };
    // person1.name = "小瑶";
    // console.log(person);
    // console.log(person1);
  </script>
</html>
