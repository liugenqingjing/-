<!--
 * @Description: 
 * @Author: 小何
 * @Date: 2021-10-05 19:31:10
 * @LastEditTime: 2021-10-05 20:03:51
 * @LastEditors:  
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>数组扁平化</title>
  </head>
  <body></body>
  <script>
    const array = [1, [2, [3, [4, 5]]], 6];

    //方法一: 使用flat()
    const res = array.flat(Infinity);
    console.log(res);

    //方法二: 利用正则:
    const res2 = JSON.stringify(array).replace(/\[|\]/g, "").split(",");
    console.log(res2);

    //方法三: 正则改良版
    const res3 = JSON.parse(
      "[" + JSON.stringify(array).replace(/\[|\]/g, "") + "]",
    );
    console.log(res3);

    //方法四: 使用reduce:
    const flatten = (array) => {
      return array.reduce((pre, cur) => {
        return pre.concat(Array.isArray(cur) ? flatten(cur) : cur);
      }, []);
    };
    const res4 = flatten(array);
    console.log(res4);

    //方法五: 函数递归:
    const res5 = [];
    const fn = (array) => {
      for (let i = 0; i < array.length; i++) {
        if (Array.isArray(array[i])) {
          fn(array[i]);
        } else {
          res5.push(array[i]);
        }
      }
    };
    fn(array);
    console.log(res5);
  </script>
</html>
